{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "chat",
  "title": "Chat",
  "description": "A set of composable chat UI components with container query support.",
  "dependencies": [
    "@radix-ui/react-avatar"
  ],
  "registryDependencies": [
    "avatar",
    "button",
    "textarea"
  ],
  "files": [
    {
      "path": "registry/new-york/chat/chat.tsx",
      "content": "import { cn } from \"@/lib/utils\";\n\nexport function Chat({\n  children,\n  className,\n}: {\n  children?: React.ReactNode;\n} & React.ComponentProps<\"div\">) {\n  return (\n    <div\n      className={cn(\n        \"h-full overflow-hidden flex flex-col @container/chat\",\n        className\n      )}\n    >\n      {children}\n    </div>\n  );\n}\n",
      "type": "registry:file",
      "target": "components/chat/chat.tsx"
    },
    {
      "path": "registry/new-york/chat/chat-header.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  AvatarFallbackProps,\n  AvatarImageProps,\n  AvatarProps,\n} from \"@radix-ui/react-avatar\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/registry/new-york/ui/avatar\";\nimport { Button } from \"@/registry/new-york/ui/button\";\n\nexport function ChatHeader({\n  children,\n  className,\n  ...props\n}: { children?: React.ReactNode } & React.ComponentProps<\"div\">) {\n  return (\n    <div\n      className={cn(\n        \"sticky top-0 z-10 p-2 bg-background flex items-center gap-2\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport function ChatHeaderMain({\n  children,\n  className,\n  ...props\n}: { children?: React.ReactNode } & React.ComponentProps<\"div\">) {\n  return (\n    <div className={cn(\"flex-1 flex items-center gap-2\", className)} {...props}>\n      {children}\n    </div>\n  );\n}\n\nexport function ChatHeaderAddon({\n  children,\n  className,\n  ...props\n}: {\n  children?: React.ReactNode;\n} & React.ComponentProps<\"div\">) {\n  return (\n    <div className={cn(\"flex items-center gap-2\", className)} {...props}>\n      {children}\n    </div>\n  );\n}\n\nexport function ChatHeaderAvatar({\n  className,\n  src,\n  alt,\n  fallback,\n  imageProps,\n  fallbackProps,\n  ...props\n}: {\n  className?: string;\n  src?: AvatarImageProps[\"src\"];\n  alt?: string;\n  fallback?: React.ReactNode;\n  imageProps?: AvatarImageProps;\n  fallbackProps?: AvatarFallbackProps;\n} & AvatarProps) {\n  return (\n    <Avatar className={cn(\"rounded-full\", className)} {...props}>\n      <AvatarImage src={src} alt={alt} {...imageProps} />\n      {fallback && (\n        <AvatarFallback {...fallbackProps}>{fallback}</AvatarFallback>\n      )}\n    </Avatar>\n  );\n}\n\nexport function ChatHeaderButton({\n  children,\n  className,\n  ...props\n}: { children?: React.ReactNode } & React.ComponentProps<typeof Button>) {\n  return (\n    <Button variant=\"ghost\" size=\"icon-sm\" className={cn(className)} {...props}>\n      {children}\n    </Button>\n  );\n}\n",
      "type": "registry:file",
      "target": "components/chat/chat-header.tsx"
    },
    {
      "path": "registry/new-york/chat/chat-messages.tsx",
      "content": "\"use client\";\n\nimport { cn } from \"@/lib/utils\";\n\nexport function ChatMessages({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      className={cn(\n        \"flex-1 flex flex-col-reverse overflow-auto py-2\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n}\n",
      "type": "registry:file",
      "target": "components/chat/chat-messages.tsx"
    },
    {
      "path": "registry/new-york/chat/chat-toolbar.tsx",
      "content": "\"use client\";\n\nimport * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { Textarea } from \"@/registry/new-york/ui/textarea\";\nimport { Button } from \"@/registry/new-york/ui/button\";\n\nexport function ChatToolbar({\n  children,\n  className,\n  ...props\n}: {\n  children?: React.ReactNode;\n} & React.ComponentProps<\"div\">) {\n  return (\n    <div\n      className={cn(\"sticky bottom-0 p-2 pt-0 bg-background\", className)}\n      {...props}\n    >\n      <div\n        className={cn(\n          \"border rounded-md py-2 px-3\",\n          \"flex flex-wrap items-start gap-x-2\",\n        )}\n      >\n        {children}\n      </div>\n    </div>\n  );\n}\n\n/** Modifier key that allows inserting a new line instead of submitting */\nconst NEWLINE_MODIFIER_KEY = \"shiftKey\" as const;\n\nexport function ChatToolbarTextarea({\n  className,\n  onSubmit,\n  onKeyDown,\n  ...props\n}: {\n  onSubmit?: () => void;\n} & React.ComponentProps<typeof Textarea>) {\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\n    if (e.key === \"Enter\" && !e[NEWLINE_MODIFIER_KEY]) {\n      e.preventDefault();\n      onSubmit?.();\n    }\n    onKeyDown?.(e);\n  };\n\n  return (\n    <div className=\"flex-1 min-w-0 order-2 grid\">\n      <Textarea\n        id=\"toolbar-input\"\n        placeholder=\"Type your message...\"\n        className={cn(\n          \"h-fit min-h-10 max-h-30 px-1 @md/chat:text-base\",\n          \"border-none shadow-none focus-visible:border-none focus-visible:ring-0 placeholder:whitespace-nowrap resize-none\",\n          className,\n        )}\n        rows={1}\n        onKeyDown={handleKeyDown}\n        {...props}\n      />\n    </div>\n  );\n}\n\nconst chatToolbarAddonAlignStyles = {\n  \"inline-start\": \"order-1\",\n  \"inline-end\": \"order-3\",\n  \"block-start\": \"order-0 w-full\",\n  \"block-end\": \"order-4 w-full\",\n};\n\nexport function ChatToolbarAddon({\n  children,\n  className,\n  align = \"inline-start\",\n  ...props\n}: {\n  children?: React.ReactNode;\n  align?: \"inline-start\" | \"inline-end\" | \"block-start\" | \"block-end\";\n} & React.ComponentProps<\"div\">) {\n  return (\n    <div\n      className={cn(\n        \"h-10 flex items-center gap-1.5\",\n        chatToolbarAddonAlignStyles[align],\n        className,\n      )}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport function ChatToolbarButton({\n  children,\n  className,\n  ...props\n}: { children?: React.ReactNode } & React.ComponentProps<typeof Button>) {\n  return (\n    <Button\n      variant=\"ghost\"\n      className={cn(\n        \"size-8 @md/chat:size-9 [&_svg:not([class*='size-'])]:size-4 [&_svg:not([class*='size-'])]:@md/chat:size-5 [&_svg]:stroke-[1.7px]\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n    </Button>\n  );\n}\n",
      "type": "registry:file",
      "target": "components/chat/chat-toolbar.tsx"
    },
    {
      "path": "registry/new-york/chat/chat-event.tsx",
      "content": "import { cn } from \"@/lib/utils\";\nimport {\n  AvatarFallbackProps,\n  AvatarImageProps,\n  AvatarProps,\n} from \"@radix-ui/react-avatar\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/registry/new-york/ui/avatar\";\nimport { useMemo } from \"react\";\n\ntype ChatEventTimeFormat =\n  | \"time\"\n  | \"date\"\n  | \"dateTime\"\n  | \"longDate\"\n  | \"relative\";\n\ntype ChatEventTimeProps = {\n  timestamp: number | Date;\n  format?: ChatEventTimeFormat;\n  locale?: string;\n  formatOptions?: Intl.DateTimeFormatOptions;\n} & React.ComponentProps<\"time\">;\n\nconst FORMAT_PRESETS: Record<ChatEventTimeFormat, Intl.DateTimeFormatOptions> =\n  {\n    time: { timeStyle: \"short\" },\n    date: { dateStyle: \"medium\" },\n    dateTime: { dateStyle: \"medium\", timeStyle: \"short\" },\n    longDate: { dateStyle: \"long\" },\n    relative: { dateStyle: \"medium\", timeStyle: \"short\" },\n  };\n\nexport function ChatEvent({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div className={cn(\"flex gap-2 px-2\", className)} {...props}>\n      {children}\n    </div>\n  );\n}\n\nexport function ChatEventAddon({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      className={cn(\n        \"w-10 @md/chat:w-12 h-full flex justify-center pt-1 shrink-0\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport function ChatEventBody({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div className={cn(\"flex-1 flex flex-col\", className)} {...props}>\n      {children}\n    </div>\n  );\n}\n\nexport function ChatEventContent({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div className={cn(\"text-sm @md/chat:text-base\", className)} {...props}>\n      {children}\n    </div>\n  );\n}\n\nexport function ChatEventTitle({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      className={cn(\"flex items-center gap-2 text-sm\", className)}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport function ChatEventAvatar({\n  className,\n  src,\n  alt,\n  fallback,\n  imageProps,\n  fallbackProps,\n  ...props\n}: {\n  className?: string;\n  src?: AvatarImageProps[\"src\"];\n  alt?: string;\n  fallback?: React.ReactNode;\n  imageProps?: AvatarImageProps;\n  fallbackProps?: AvatarFallbackProps;\n} & AvatarProps) {\n  return (\n    <Avatar\n      className={cn(\"rounded-full size-8 @md/chat:size-10\", className)}\n      {...props}\n    >\n      <AvatarImage src={src} alt={alt} {...imageProps} />\n      {fallback && (\n        <AvatarFallback {...fallbackProps}>{fallback}</AvatarFallback>\n      )}\n    </Avatar>\n  );\n}\n\nfunction getRelativeTimeString(date: Date, locale: string): string {\n  const now = new Date();\n  const diffInSeconds = Math.floor((now.getTime() - date.getTime()) / 1000);\n\n  const rtf = new Intl.RelativeTimeFormat(locale, { numeric: \"auto\" });\n\n  if (diffInSeconds < 60) {\n    return rtf.format(-diffInSeconds, \"second\");\n  }\n\n  const diffInMinutes = Math.floor(diffInSeconds / 60);\n  if (diffInMinutes < 60) {\n    return rtf.format(-diffInMinutes, \"minute\");\n  }\n\n  const diffInHours = Math.floor(diffInMinutes / 60);\n  if (diffInHours < 24) {\n    return rtf.format(-diffInHours, \"hour\");\n  }\n\n  const diffInDays = Math.floor(diffInHours / 24);\n  if (diffInDays < 7) {\n    return rtf.format(-diffInDays, \"day\");\n  }\n\n  return new Intl.DateTimeFormat(locale, {\n    dateStyle: \"medium\",\n    timeStyle: \"short\",\n  }).format(date);\n}\n\nexport function ChatEventTime({\n  timestamp,\n  format = \"dateTime\",\n  locale,\n  formatOptions,\n  className,\n  ...props\n}: ChatEventTimeProps) {\n  const date = useMemo(\n    () => (timestamp instanceof Date ? timestamp : new Date(timestamp)),\n    [timestamp],\n  );\n\n  const resolvedLocale =\n    locale ?? (typeof navigator !== \"undefined\" ? navigator.language : \"en-US\");\n\n  const formattedTime = useMemo(() => {\n    if (format === \"relative\") {\n      return getRelativeTimeString(date, resolvedLocale);\n    }\n\n    const options = formatOptions ?? FORMAT_PRESETS[format];\n    return new Intl.DateTimeFormat(resolvedLocale, options).format(date);\n  }, [date, format, formatOptions, resolvedLocale]);\n\n  const isoString = useMemo(() => date.toISOString(), [date]);\n\n  return (\n    <time\n      dateTime={isoString}\n      className={cn(\"text-xs text-muted-foreground\", className)}\n      {...props}\n    >\n      {formattedTime}\n    </time>\n  );\n}\n",
      "type": "registry:file",
      "target": "components/chat/chat-event.tsx"
    }
  ],
  "type": "registry:component"
}